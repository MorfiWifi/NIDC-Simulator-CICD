@using System.Linq.Expressions;

    <g
       id="shear_rams_whole_box">
      <rect
         style="fill:#ff8080;stroke:#000000;stroke-width:0.486169;stroke-linecap:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
         id="rect15681"
         width="106.38393"
         height="10.530887"
         x="347.51175"
         y="222.95717" />
      <rect
         style="fill:#ff8080;fill-opacity:1;stroke:#262626;stroke-width:0.621;stroke-linecap:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
         id="rect15683"
         width="116.83208"
         height="7.9297991"
         x="342.28766"
         y="214.60292" />
      <rect
         style="fill:#ff8080;fill-opacity:1;stroke:#000000;stroke-width:0.985174;stroke-linecap:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
         id="rect395"
         width="212.09822"
         height="49.661953"
         x="294.6546"
         y="233.56543" />
      <text
         xml:space="preserve"
         style="font-size:14.1111px;text-align:center;text-anchor:middle;fill:#ff8080;fill-opacity:1;stroke:#000000;stroke-width:1.048;stroke-linecap:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
         x="334.63953"
         y="255.03673"
         id="text399"><tspan
           sodipodi:role="line"
           id="tspan397"
           style="font-size:14.1111px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.048"
           x="334.63953"
           y="255.03673">SHEAR</tspan></text>
      <text
         xml:space="preserve"
         style="font-size:14.1111px;text-align:center;text-anchor:middle;fill:#ff8080;fill-opacity:1;stroke:#000000;stroke-width:1.048;stroke-linecap:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
         x="468.07782"
         y="255.04018"
         id="text403"><tspan
           sodipodi:role="line"
           id="tspan401"
           style="font-size:14.1111px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.048"
           x="468.07782"
           y="255.04018">RAMS</tspan></text>
      <g
         id="g556"
         transform="translate(5.5938117)">
        <circle style=@(CloseLed==1?LightOn:LightOff)
           id="shear_light"
           cx="-345.47299"
           cy="-274.03513"
           r="4.9532042"
           transform="scale(-1)" />
        <text
           xml:space="preserve"
           style="font-size:6.73764px;text-align:center;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.664643;stroke-linecap:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
           x="327.71552"
           y="276.44498"
           id="shear_text"><tspan
             sodipodi:role="line"
             id="tspan509"
             style="fill:#000000;stroke-width:0.664639"
             x="327.71552"
             y="276.44498">@CloseText</tspan></text>
      </g>
      <g
         id="g521"
         transform="translate(-10.505781,103.59567)">
        <circle
           style=@(OpenLed==1?LightOn:LightOff)
           id="rams_light"
           cx="459.53314"
           cy="170.43945"
           r="4.9532042" />
        <text
           xml:space="preserve"
           style="font-size:6.73764px;text-align:center;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.664643;stroke-linecap:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
           x="477.53079"
           y="172.84927"
           id="rams_text"><tspan
             sodipodi:role="line"
             id="tspan517"
             style="fill:#000000;stroke-width:0.664639"
             x="477.53079"
             y="172.84927">@OpenText</tspan></text>
      </g>
      <rect
         style="fill:#ff8080;stroke:#000000;stroke-width:0.534723;stroke-linecap:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
         id="rect523"
         width="106.33537"
         height="12.74519"
         x="-454.78824"
         y="-296.13843"
         transform="scale(-1)" />
      <rect
         style="fill:#333333;fill-opacity:1;stroke:#262626;stroke-width:1.24946;stroke-linecap:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
         id="rect525"
         width="117.00367"
         height="6.1213903"
         x="-459.66397"
         y="-302.62274"
         transform="scale(-1)" />
      <g
         id="g7091-2"
         transform="matrix(-0.01306482,-0.99991465,-0.97514137,0.01274114,795.91701,916.11627)">
        <g
           id="g7089-5">
          <rect
             style="fill:#4d4d4d;fill-opacity:1;stroke:none;stroke-width:1.38432;stroke-linecap:square;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
             id="rect7085-7"
             width="6.1515517"
             height="17.636511"
             x="639.41064"
             y="287.31256"
             transform="matrix(0.99991903,0.01272537,0.01207956,0.99992704,0,0)" />
          <path
             style="fill:#4d4d4d;fill-opacity:1;stroke:none;stroke-width:1.38651;stroke-linecap:square;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
             d="m 642.82609,295.42902 2.97832,-6.42437 3.17952,6.50128 z"
             id="path7087-2" />
        </g>
      </g>
      <g
         id="g7231"
         transform="matrix(0.01306482,-0.99991465,0.97514137,0.01274114,5.1861806,916.11627)">
        <g
           id="g7229">
          <rect
             style="fill:#4d4d4d;fill-opacity:1;stroke:none;stroke-width:1.38432;stroke-linecap:square;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
             id="rect7225"
             width="6.1515517"
             height="17.636511"
             x="639.41064"
             y="287.31256"
             transform="matrix(0.99991903,0.01272537,0.01207956,0.99992704,0,0)" />
          <path
             style="fill:#4d4d4d;fill-opacity:1;stroke:none;stroke-width:1.38651;stroke-linecap:square;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
             d="m 642.82609,295.42902 2.97832,-6.42437 3.17952,6.50128 z"
             id="path7227" />
        </g>
      </g>
      <g
          @onclick="SwitchShearRamsState"
          style="cursor:pointer;"
         id="shear_rams_handle"
         transform=@(ShearRamsState==1?ShearRamsHandleRight:ShearRamsHandleLeft)>
        <g
           id="g6782"
           transform="matrix(1,0,0,1.1462453,24.854787,-17.273821)">
          <path
             style="fill:#1a1a1a;fill-opacity:1;stroke:#808080;stroke-width:0.706;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
             d="m 178.67045,237.32887 4.6874,-37.61587 z"
             id="path6770" />
          <path
             style="fill:#1a1a1a;fill-opacity:1;stroke:#808080;stroke-width:0.706;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
             d="M 194.31183,237.32887 189.62443,199.713 Z"
             id="path6772" />
          <g
             id="g6778"
             style="stroke:none"
             transform="rotate(135,258.46546,195.72114)">
            <circle
               style="fill:#ffffff;fill-opacity:0;stroke:none;stroke-width:0.967048;stroke-linecap:square;stroke-opacity:1;paint-order:stroke fill markers"
               id="circle6774"
               cx="-393.0795"
               cy="90.963303"
               r="44.516476"
               transform="rotate(-135)" />
            <circle
               style="fill:#f9f9f9;fill-opacity:1;stroke:#808080;stroke-width:1.306;stroke-linecap:square;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
               id="circle6776"
               cx="-393.0795"
               cy="90.963295"
               r="9.321229"
               transform="rotate(-135)" />
          </g>
          <circle
             style="fill:#1a1a1a;fill-opacity:1;stroke:#808080;stroke-width:1.306;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
             id="circle6780"
             cx="186.54437"
             cy="196.16248"
             r="4.770761" />
        </g>
      </g>
    </g>

@code {

    protected string ShearRamsHandleLeft { get; set; } = "matrix(0.31655314,-0.19487118,0.19487118,0.31655314,280.66403,233.22624)";
    protected string ShearRamsHandleRight { get; set; } = "matrix(0.31305439,0.20044355,-0.20044355,0.31305439,384.08513,150.38587)";
    protected string LightOn { get; set; } = "fill:#00ff00;fill-opacity:1;stroke:#262626;stroke-width:0.660987;stroke-linecap:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers";
    protected string LightOff { get; set; } = "fill:#333333;fill-opacity:1;stroke:#262626;stroke-width:0.660987;stroke-linecap:round;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers";
    protected string OpenText { get; set; } = "Open";
    protected string CloseText { get; set; } = "Close";

    [CascadingParameter] EditContext EditContext { get; set; } = default!;

    [Parameter]
    public EventCallback<double> ShearRamsStateChanged { get; set; }
    [Parameter] public Expression<Func<double>> ShearRamsStateExpression { get; set; }
    public double _shearRamsState = 0;
    [Parameter]
    public double ShearRamsState
    {
        get => _shearRamsState;
        set
        {
            if (_shearRamsState == value) return;
            _shearRamsState = value;
            ShearRamsStateChanged.InvokeAsync(_shearRamsState);
            var fieldIdentifier = FieldIdentifier.Create(ShearRamsStateExpression);
            EditContext.NotifyFieldChanged(fieldIdentifier);
        }
    }

    [Parameter]
    public EventCallback<int> CloseLedChanged { get; set; }
    [Parameter] public Expression<Func<int>> CloseLedExpression { get; set; }
    public int _CloseLed = 0;
    [Parameter]
    public int CloseLed
    {
        get => _CloseLed;
        set
        {
            if (_CloseLed == value) return;
            _CloseLed = value;
            CloseLedChanged.InvokeAsync(_CloseLed);
            var fieldIdentifier = FieldIdentifier.Create(CloseLedExpression);
            EditContext.NotifyFieldChanged(fieldIdentifier);
        }
    }

    [Parameter]
    public EventCallback<int> OpenLedChanged { get; set; }
    [Parameter] public Expression<Func<int>> OpenLedExpression { get; set; }
    public int _OpenLed = 0;
    [Parameter]
    public int OpenLed
    {
        get => _OpenLed;
        set
        {
            if (_OpenLed == value) return;
            _OpenLed = value;
            OpenLedChanged.InvokeAsync(_OpenLed);
            var fieldIdentifier = FieldIdentifier.Create(OpenLedExpression);
            EditContext.NotifyFieldChanged(fieldIdentifier);
        }
    }


    protected void SwitchShearRamsState()
    {
        if (ShearRamsState==1)
            ShearRamsState = 0;
        else
            ShearRamsState = 1;
        StateHasChanged();

    }

}